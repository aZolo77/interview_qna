# Webpack, разбиение на чанки, tree shaking, plugins. Webpack vs Vite

## Что такое бандлер
Бандлер — это инструмент, который объединяет множество файлов (JS, CSS, изображения и т. д.) в один или несколько оптимизированных пакетов, которые можно эффективно загружать в браузер.  
Он также умеет компилировать код из языков/препроцессоров (TypeScript, SCSS) в нативный для браузера формат.

---

## Webpack

**Webpack** — это самый популярный модульный бандлер для JS-приложений.

### Основные возможности:
- **Разбиение на чанки (Code Splitting):**  
  Позволяет разбивать код на отдельные части, загружаемые по мере необходимости. Например, загружать код для страницы "Профиль" только когда пользователь откроет её.
  
- **Tree Shaking:**  
  Удаляет неиспользуемый код (например, импортированную, но не вызываемую функцию).
  
- **Plugins:**  
  Плагины расширяют возможности сборки — оптимизация ассетов, генерация HTML, работа с окружением и т. д.  
  Примеры: HtmlWebpackPlugin, MiniCssExtractPlugin, DefinePlugin.
  
- **Loaders:**  
  Обрабатывают файлы перед их попаданием в бандл (Babel-loader для JS/TS, css-loader, file-loader и т. д.).

### Как работает Webpack при разработке
- Собирает весь проект в один или несколько бандлов.  
- Следит за изменениями и пересобирает код (Hot Module Replacement).  
- Первая сборка может быть долгой, но последующие инкрементальные сборки быстрее.

---

## Vite

**Vite** — современный инструмент сборки от создателя Vue (Evan You).  
Название переводится как «быстрый».

### Особенности:
- Использует **нативные ES-модули (ESM)** в браузере.  
  В dev-режиме нет необходимости полностью собирать проект — браузер сам загружает модули.  
- Для продакшена использует **Rollup**, что даёт tree shaking, code splitting и оптимизированный бандл.  
- **Pre-bundling зависимостей** через esbuild (написан на Go, в десятки раз быстрее JS-аналога).  
- Быстрый HMR (обновление модулей без полной пересборки).

### Преимущества Vite:
- Быстрый старт dev-сервера (нет долгой первой сборки).  
- Очень быстрые обновления кода (особенно в больших проектах).  
- Простая конфигурация, встроенная поддержка TypeScript.  
- Совместимость с экосистемой Rollup-плагинов.

---

## Сравнение Webpack vs Vite

| Характеристика          | Webpack                          | Vite                                   |
|--------------------------|----------------------------------|----------------------------------------|
| Dev-сервер               | Пересобирает проект              | Использует ESM, почти мгновенно        |
| Первая сборка            | Долгая (зависит от проекта)      | Мгновенная                             |
| HMR                      | Может быть медленным на больших проектах | Очень быстрый                          |
| Продакшн-сборка          | Встроенные оптимизации           | Rollup с tree-shaking и code splitting |
| Конфигурация             | Сложнее, много плагинов и лоадеров | Простая, но можно расширять            |
| Поддержка сообщества     | Огромное, зрелое                 | Быстро растёт                          |

---

## Дополнительно: Best Practices для Webpack
- Использовать динамические импорты для code splitting.  
- Включать режим `production` (включает оптимизации).  
- Настраивать `optimization.splitChunks` для разделения кода.  
- Применять `MiniCssExtractPlugin` для вынесения CSS.  
- Включать `Bundle Analyzer` для поиска «тяжёлых» зависимостей.

---

## Где какой инструмент использовать
- **Webpack** — когда нужен гибкий, проверенный временем инструмент, поддержка legacy-проектов, множество плагинов и кастомизация.  
- **Vite** — если важна скорость разработки, работа с современными фреймворками (Vue, React, Svelte), лёгкая конфигурация и быстрый старт.

---

## Вывод
- Webpack — мощный комбайн, но тяжёлый в настройке и медленный на старте.  
- Vite — лёгкий, быстрый и удобный, но относительно новый (хотя уже активно используется в реальных проектах).  
- Для **новых проектов** чаще рекомендуют Vite. Для **старых/enterprise** проектов Webpack пока остаётся стандартом.

# Event Loop –≤ JavaScript

## üéØ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**Event Loop** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –≤ JavaScript, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–±—ã—Ç–∏–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç JavaScript –±—ã—Ç—å –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–º, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Event Loop

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### Call Stack (–°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤)
- **LIFO —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ö–æ–≥–¥–∞ —Å—Ç–µ–∫ –ø—É—Å—Ç, Event Loop –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏

#### Task Queue (–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á)
- **Macrotasks**: setTimeout, setInterval, setImmediate
- **FIFO –ø–æ—Ä—è–¥–æ–∫** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ Call Stack –ø—É—Å—Ç

#### Microtask Queue (–û—á–µ—Ä–µ–¥—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á)
- **Promise.then/catch/finally**, queueMicrotask
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ** —á–µ–º —É Task Queue
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–∏

#### Web APIs
- **–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ API**: DOM, HTTP, Timers
- **Node.js API**: File System, Network
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã Event Loop

```
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –≤ Call Stack
2. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –í–°–ï –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ (Microtask Queue)
3. –í–∑—è—Ç—å –û–î–ù–£ –∑–∞–¥–∞—á—É –∏–∑ Task Queue
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å —à–∞–≥–∞ 1
```

### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
1. **Call Stack** - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥
2. **Microtask Queue** - –ø—Ä–æ–º–∏—Å—ã, queueMicrotask
3. **Task Queue** - —Ç–∞–π–º–µ—Ä—ã, —Å–æ–±—ã—Ç–∏—è

---

## ‚öñÔ∏è Macrotasks vs Microtasks

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Macrotasks | Microtasks |
|----------------|------------|------------|
| **–ü—Ä–∏–º–µ—Ä—ã** | setTimeout, setInterval, I/O | Promise, queueMicrotask |
| **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç** | –ù–∏–∑–∫–∏–π | –í—ã—Å–æ–∫–∏–π |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞** | –ü–æ –æ–¥–Ω–æ–π –∑–∞ —Ü–∏–∫–ª | –í—Å–µ —Å—Ä–∞–∑—É |
| **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞** | –ú–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä | –ú–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ |

---

## üé≠ –§–∞–∑—ã Event Loop (Node.js)

1. **Timers** - setTimeout, setInterval
2. **Pending callbacks** - I/O –∫–æ–ª–ª–±—ç–∫–∏
3. **Idle, prepare** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
4. **Poll** - –Ω–æ–≤—ã–µ I/O —Å–æ–±—ã—Ç–∏—è
5. **Check** - setImmediate
6. **Close callbacks** - –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–ú–µ–∂–¥—É –∫–∞–∂–¥–æ–π —Ñ–∞–∑–æ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **–≤—Å–µ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏**.

---

## üö´ –ß–∞—Å—Ç—ã–µ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏—è

### –ú–∏—Ñ: "setTimeout(fn, 0) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ"
**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ ~4ms, –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–µ–∫–∞ –∏ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á.

### –ú–∏—Ñ: "–ü—Ä–æ–º–∏—Å—ã –≤—Å–µ–≥–¥–∞ –±—ã—Å—Ç—Ä–µ–µ —Ç–∞–π–º–µ—Ä–æ–≤"
**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–æ–º–∏—Å—ã –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –Ω–æ –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞–∫—Ä–æ–∑–∞–¥–∞—á.

### –ú–∏—Ñ: "JavaScript –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π –∏–∑-–∑–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏"
**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å**: JavaScript –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç Web APIs –∏ Event Loop.

---

## üìä –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏

### Chrome DevTools
- **Performance tab** - –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Call Stack** - —Ç–µ–∫—É—â–∏–π —Å—Ç–µ–∫
- **Task queues** - –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á

### Node.js
- `--inspect` —Ñ–ª–∞–≥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- `process.nextTick()` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—á–µ—Ä–µ–¥–µ–π

---

## ‚úÖ Best Practices

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò–∑–±–µ–≥–∞–π—Ç–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Web Workers –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –†–∞–∑–±–∏–≤–∞–π—Ç–µ –±–æ–ª—å—à–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —á–∞—Å—Ç–∏

### –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å
- –ü–æ–Ω–∏–º–∞–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è async/await –∏ Promise
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ queueMicrotask –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
- –ò–∑–±–µ–≥–∞–π—Ç–µ –≥–ª—É–±–æ–∫–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏ –≤ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∞—Ö

### –û—Ç–ª–∞–¥–∫–∞
- –ò–∑—É—á–∞–π—Ç–µ —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –≤ DevTools
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ console.trace() –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

- –û–±—ä—è—Å–Ω–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É macrotasks –∏ microtasks
- –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –∫–æ–¥–∞? (–¥–∞—é—Ç –ø—Ä–∏–º–µ—Ä —Å –ø—Ä–æ–º–∏—Å–∞–º–∏ –∏ —Ç–∞–π–º–µ—Ä–∞–º–∏)
- –ö–∞–∫ Event Loop —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ vs Node.js?
- –ü–æ—á–µ–º—É setTimeout(fn, 0) –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ?
- –ß—Ç–æ —Ç–∞–∫–æ–µ "–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Event Loop" –∏ –∫–∞–∫ –µ—ë –∏–∑–±–µ–∂–∞—Ç—å?
- –û–±—ä—è—Å–Ω–∏—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ ‚Üí microtasks ‚Üí macrotasks
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç async/await —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è Event Loop?
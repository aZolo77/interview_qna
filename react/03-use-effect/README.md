# โ๏ธ useEffect โ ััะบ ะดะปั ะฟะพะฑะพัะฝัั ัััะตะบัะพะฒ

## ๐ ะงัะพ ััะพ ัะฐะบะพะต
**useEffect** โ ััะพ ััะบ, ะบะพัะพััะน ะฟะพะทะฒะพะปัะตั ะฒัะฟะพะปะฝััั **ะฟะพะฑะพัะฝัะต ัััะตะบัั** ะฒ ััะฝะบัะธะพะฝะฐะปัะฝัั ะบะพะผะฟะพะฝะตะฝัะฐั React.  
ะะพะฑะพัะฝัะต ัััะตะบัั โ ััะพ ะดะตะนััะฒะธั, ะฝะต ะฒะปะธัััะธะต ะฝะฐะฟััะผัั ะฝะฐ ะพััะธัะพะฒะบั ะบะพะผะฟะพะฝะตะฝัะฐ, ะฝะฐะฟัะธะผะตั:
- ะะฐะฟัะพัั ะบ API  
- ะะพะดะฟะธัะบะธ ะธ ัะฐะนะผะตัั  
- ะะฐะฑะพัะฐ ั DOM ะฝะฐะฟััะผัั  
- ะกะธะฝััะพะฝะธะทะฐัะธั ะดะฐะฝะฝัั ะฒ `localStorage`  

---

## ๐ก ะกะธะฝัะฐะบัะธั

```js
useEffect(() => {
  // ะบะพะด ัััะตะบัะฐ
  return () => {
    // ััะฝะบัะธั ะพัะธััะบะธ (cleanup)
  };
}, [dependencies]);
```

---

## โ๏ธ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั
- ะะตัะฒัะน ะฐัะณัะผะตะฝั โ ััะฝะบัะธั ัััะตะบัะฐ.
- ะัะพัะพะน ะฐัะณัะผะตะฝั โ **ะผะฐััะธะฒ ะทะฐะฒะธัะธะผะพััะตะน**:
  - ะัะปะธ ะฟะตัะตะดะฐะฝ ะผะฐััะธะฒ `[userId]`, ัััะตะบั ะฑัะดะตั ะฒัะทัะฒะฐัััั ัะพะปัะบะพ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ `userId`.
  - ะัะปะธ ะฟะตัะตะดะฐัั `[]`, ัััะตะบั ััะฐะฑะพัะฐะตั **ัะพะปัะบะพ ะพะดะธะฝ ัะฐะท** โ ะฐะฝะฐะปะพะณ `componentDidMount`.
  - ะัะปะธ ะฝะต ะฟะตัะตะดะฐัั ะฒัะพัะพะน ะฐัะณัะผะตะฝั ะฒะพะพะฑัะต โ ัััะตะบั ะฑัะดะตั ะฒัะทัะฒะฐัััั **ะฝะฐ ะบะฐะถะดัะน ัะตะฝะดะตั**.

---

## โ ะัะธะผะตั ะบะพััะตะบัะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

```js
useEffect(() => {
  fetchData();
}, [userId]); // ะัะฟะพะปะฝะธััั ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ userId
```

---

## โ๏ธ ะัะธะผะตั ะพัะธะฑะบะธ (ะฑะตัะบะพะฝะตัะฝัะน ัะธะบะป)

```js
useEffect(() => {
  setCount(count + 1); // ะพะฑะฝะพะฒะปะตะฝะธะต ัะพััะพัะฝะธั ะฒัะทัะฒะฐะตั ะฝะพะฒัะน ัะตะฝะดะตั โ ัััะตะบั ัะฝะพะฒะฐ ััะฐะฑะฐััะฒะฐะตั
}); // ะฝะตั ะผะฐััะธะฒะฐ ะทะฐะฒะธัะธะผะพััะตะน!
```

---

## ๐งน ะัะธััะบะฐ ัััะตะบัะฐ (cleanup)

```js
useEffect(() => {
  const subscription = subscribe();
  return () => subscription.unsubscribe(); // ะพัะธััะบะฐ ะฟัะธ ัะฐะทะผะพะฝัะธัะพะฒะฐะฝะธะธ
}, []);
```

---

## ๐ง ะะฐะบ ะธะทะฑะตะถะฐัั ะปะธัะฝะธั ะฒัะทะพะฒะพะฒ
1. **ะฃะบะฐะทัะฒะฐะนัะต ะทะฐะฒะธัะธะผะพััะธ ัะฒะฝะพ** โ ะฒัั, ััะพ ะธัะฟะพะปัะทัะตััั ะฒะฝัััะธ ัััะตะบัะฐ, ะดะพะปะถะฝะพ ะฑััั ะฒ ะผะฐััะธะฒะต ะทะฐะฒะธัะธะผะพััะตะน.  
2. **ะัะฟะพะปัะทัะนัะต ะผะตะผะพะธะทะฐัะธั** (`useCallback`, `useMemo`) ะดะปั ะบะพะปะปะฑะตะบะพะฒ ะธ ะฒััะธัะปะตะฝะธะน, ััะพะฑั ะฝะต ะฟะตัะตัะพะทะดะฐะฒะฐะปะธัั ะฝะฐ ะบะฐะถะดัะน ัะตะฝะดะตั.  
3. **ะะต ะพะฑะฝะพะฒะปัะนัะต ัะพััะพัะฝะธะต ะฑะตะท ััะปะพะฒะธะน** โ ััะพ ัะฐััะฐั ะฟัะธัะธะฝะฐ ะฑะตัะบะพะฝะตัะฝัั ัะธะบะปะพะฒ.  
4. **ะกะปะตะดะธัะต ะทะฐ ะปะธะฝัะธะฝะณะพะผ** โ ะฟัะฐะฒะธะปะพ `react-hooks/exhaustive-deps` ะฟะพะผะพะณะฐะตั ะฝะต ะทะฐะฑััั ะฝัะถะฝัะต ะทะฐะฒะธัะธะผะพััะธ.  

---

## ๐ฌ ะัะฐัะบะพ
| ะะตะนััะฒะธะต | ะงัะพ ะดะตะปะฐะตั |
|-----------|-------------|
| `useEffect(() => {}, [])` | ะะดะธะฝ ัะฐะท ะฟัะธ ะผะพะฝัะธัะพะฒะฐะฝะธะธ |
| `useEffect(() => {}, [a, b])` | ะัะธ ะธะทะผะตะฝะตะฝะธะธ ะทะฐะฒะธัะธะผะพััะตะน |
| `useEffect(() => {})` | ะัะธ ะบะฐะถะดะพะผ ัะตะฝะดะตัะต |
| `return () => {}` | ะัะธััะบะฐ ัััะตะบัะฐ |

---

## โ ะกะพะฒะตั
> ะัะปะธ ัััะตะบั ะทะฐะฒะธัะธั ะพั ะฟะตัะตะผะตะฝะฝะพะน โ ะดะพะฑะฐะฒั ะตั ะฒ ะทะฐะฒะธัะธะผะพััะธ.  
> ะัะปะธ ะฝะต ะดะพะปะถะตะฝ ะทะฐะฒะธัะตัั โ ะฒัะฝะตัะธ ะธะท ัััะตะบัะฐ ะธะปะธ ะธัะฟะพะปัะทัะน `useRef`.  
> ะ ะฝะธะบะพะณะดะฐ ะฝะต ะฒัะทัะฒะฐะน `setState` ะฒะฝัััะธ `useEffect` ะฑะตะท ััะปะพะฒะธั ๐
# Web Performance и ключевые метрики

При оценке производительности веб-приложений важно учитывать метрики, которые влияют на **UX (User Experience)** и помогают понять, насколько сайт быстрый и отзывчивый.

---

## Основные метрики

### 1. **LCP (Largest Contentful Paint)**
- Показывает, сколько времени требуется, чтобы самый большой элемент на странице (например, изображение, блок текста) стал видимым.
- Цель: **< 2.5 секунды**.

**Как улучшить:**
- Оптимизация изображений (WebP/AVIF, responsive images).
- Использование `preload` для критичных ресурсов.
- Минификация и оптимизация CSS/JS.
- Lazy loading для изображений и видео.

---

### 2. **FID (First Input Delay)**
- Время отклика страницы на первое взаимодействие (клик, нажатие клавиши).
- Цель: **< 100 мс**.

**Как улучшить:**
- Уменьшить блокирующий JS.
- Делать разбивку кода (code splitting).
- Использовать Web Workers для тяжёлых вычислений.

---

### 3. **CLS (Cumulative Layout Shift)**
- Измеряет стабильность интерфейса: насколько элементы «прыгают» при загрузке.
- Цель: **< 0.1**.

**Как улучшить:**
- Задавать размеры для изображений и видео (`width`, `height`, `aspect-ratio`).
- Не вставлять динамический контент сверху без резерва места.
- Использовать `font-display: swap` для шрифтов.

---

### 4. **FCP (First Contentful Paint)**
- Время до отображения **первого контента** (текста или изображения).
- Цель: **< 1.8 секунд**.

**Как улучшить:**
- Минимизировать CSS и JS.
- Оптимизировать серверный рендеринг (SSR/SSG).
- Использовать CDN.

---

### 5. **INP (Interaction to Next Paint)**
- Новая метрика, заменяющая FID: измеряет скорость отклика **на все взаимодействия**, а не только на первое.
- Цель: **< 200 мс**.

**Как улучшить:**
- Избегать долгих JS-операций.
- Использовать requestIdleCallback для неважных задач.
- Переносить тяжёлые операции в Web Workers.

---

### 6. **TTFB (Time To First Byte)**
- Время до получения первого байта от сервера.
- Цель: **< 0.8 секунд**.

**Как улучшить:**
- Использовать CDN.
- Оптимизировать бэкенд и базу данных.
- Настроить кэширование (HTTP Cache, Service Worker).
- Включить HTTP/2 или HTTP/3.

---

## Best Practices для улучшения производительности

1. **Оптимизация загрузки ресурсов**
   - Минификация JS и CSS.
   - Tree-shaking.
   - Code splitting.
   - Ленивая загрузка (`lazy`).

2. **Работа с изображениями**
   - Использовать современные форматы (WebP, AVIF).
   - Настраивать `srcset` для разных экранов.
   - Использовать `loading="lazy"`.

3. **Кэширование и CDN**
   - Правильные заголовки `Cache-Control`.
   - CDN для статики.
   - Prefetch, Preload, DNS Prefetch.

4. **Снижение блокировки основного потока**
   - Делить тяжелые задачи на микрозадачи.
   - Использовать Web Workers.
   - Избегать долгих синхронных операций.

5. **Мониторинг**
   - Lighthouse, PageSpeed Insights.
   - Web Vitals API.
   - Реальные данные (RUM — Real User Monitoring).

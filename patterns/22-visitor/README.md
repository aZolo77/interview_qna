# üß© –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω: Visitor (–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å)

## üìå –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
**Visitor (–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å)** ‚Äî —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **–¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤**, **–Ω–µ –∏–∑–º–µ–Ω—è—è —ç—Ç–∏ –∫–ª–∞—Å—Å—ã**.  
–û–Ω –æ—Ç–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–±—ä–µ–∫—Ç–æ–≤ –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –Ω–∞–¥ –Ω–∏–º–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å.

---

## üéØ –ò–¥–µ—è
–ò–Ω–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ—Ä–µ–≤–æ, –≥—Ä–∞—Ñ –∏–ª–∏ –∫–æ–º–ø–æ–Ω–æ–≤—â–∏–∫), –∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∞–¥ –Ω–µ–π —Ä–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –ø–æ–¥—Å—á—ë—Ç, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç.–¥.  
–ï—Å–ª–∏ –∫–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä—è–º–æ –≤ –∫–ª–∞—Å—Å—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äî –æ–Ω–∏ –±—ã—Å—Ç—Ä–æ "—Ä–∞—Å–ø—É—Ö–Ω—É—Ç".  
**Visitor —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É**, –ø–µ—Ä–µ–Ω–æ—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã-–ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏.

---

## üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å **–º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π** –Ω–∞–¥ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.  
- –ö–æ–≥–¥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–æ–≤ **—Ä–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è**, –∞ –≤–æ—Ç **–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –Ω–∏–º–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç–æ**.  
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å** –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –Ω–µ –æ—Ç–Ω–æ—Å—è—â–µ–µ—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ –ª–æ–≥–∏–∫–µ –æ–±—ä–µ–∫—Ç–æ–≤.

---

## üíª –ü—Ä–∏–º–µ—Ä –≤ JavaScript

```js
// –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
class Circle {
  accept(visitor) {
    visitor.visitCircle(this);
  }
}

class Rectangle {
  accept(visitor) {
    visitor.visitRectangle(this);
  }
}

// –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—Ä–∏—Å–æ–≤–∫—É
class RenderVisitor {
  visitCircle(circle) {
    console.log("–†–∏—Å—É–µ–º –∫—Ä—É–≥ ‚≠ï");
  }

  visitRectangle(rectangle) {
    console.log("–†–∏—Å—É–µ–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ ‚ñ≠");
  }
}

// –ï—â—ë –æ–¥–∏–Ω –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—á—ë—Ç –ø–ª–æ—â–∞–¥–∏
class AreaVisitor {
  visitCircle(circle) {
    console.log("–í—ã—á–∏—Å–ª—è–µ–º –ø–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ üßÆ");
  }

  visitRectangle(rectangle) {
    console.log("–í—ã—á–∏—Å–ª—è–µ–º –ø–ª–æ—â–∞–¥—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ üìè");
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const shapes = [new Circle(), new Rectangle()];
const render = new RenderVisitor();
const area = new AreaVisitor();

for (const shape of shapes) {
  shape.accept(render);
  shape.accept(area);
}
```

---

## üß© –ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
1. –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç (`Circle`, `Rectangle`) —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ `accept(visitor)`, –∫–æ—Ç–æ—Ä—ã–π **–¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—é**.  
2. –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å –∑–Ω–∞–µ—Ç, **—á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –∫–∞–∂–¥—ã–º —Ç–∏–ø–æ–º –æ–±—ä–µ–∫—Ç–∞**.  
3. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ExportVisitor`, `ValidateVisitor`) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∞–º–∏—Ö –∫–ª–∞—Å—Å–æ–≤ `Circle` –∏ `Rectangle`.

---

## üß† –ü—Ä–∏–º–µ—Ä –∏–∑ –∂–∏–∑–Ω–∏
- **–¢—É—Ä–∏—Å—Ç –∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**  
  –¢—É—Ä–∏—Å—Ç (Visitor) –ø–æ—Å–µ—â–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –º–µ—Å—Ç–∞ (Elements) ‚Äî –º—É–∑–µ–π, –ø–∞—Ä–∫, –∫–∞—Ñ–µ ‚Äî –∏ –≤–µ–¥—ë—Ç —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ –∫–∞–∂–¥–æ–º –º–µ—Å—Ç–µ.  
  –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Ç—É—Ä–∏—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–ª–æ–≥–µ—Ä–∞) –ø—Ä–æ—Å—Ç–æ: –Ω–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å–∞–º–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## ‚úÖ –ü–ª—é—Å—ã
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, **–Ω–µ –º–µ–Ω—è—è –∫–ª–∞—Å—Å—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤**.  
- –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.  
- –°–æ–±–∏—Ä–∞–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.  

---

## ‚ùå –ú–∏–Ω—É—Å—ã
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ **–Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤** –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π.  
- –ü–æ–≤—ã—à–∞–µ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è–º–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.  
- –ù–µ –æ—á–µ–Ω—å —É–¥–æ–±–µ–Ω –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ (–≤—Ä–æ–¥–µ JavaScript).  

---

## ‚öôÔ∏è –ú–∏–Ω–∏-–ø—Ä–∏–º–µ—Ä —Å —Ç–∏–ø–∞–º–∏ —É–∑–ª–æ–≤

```js
class NumberNode {
  constructor(value) {
    this.value = value;
  }
  accept(visitor) {
    return visitor.visitNumber(this);
  }
}

class AddNode {
  constructor(left, right) {
    this.left = left;
    this.right = right;
  }
  accept(visitor) {
    return visitor.visitAdd(this);
  }
}

class EvaluateVisitor {
  visitNumber(node) {
    return node.value;
  }

  visitAdd(node) {
    return node.left.accept(this) + node.right.accept(this);
  }
}

const expr = new AddNode(new NumberNode(5), new NumberNode(3));
const evaluator = new EvaluateVisitor();
console.log(expr.accept(evaluator)); // 8
```

---

## üí¨ –ù–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –º–æ–≥—É—Ç —Å–ø—Ä–æ—Å–∏—Ç—å
- –ß–µ–º Visitor –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Strategy?  
  ‚Üí Visitor —Ä–∞–±–æ—Ç–∞–µ—Ç **—Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –æ–±—ä–µ–∫—Ç–æ–≤** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–æ–π–Ω—É—é –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—é**,  
  –∞ Strategy ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–º–µ–Ω—è–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º.  
- –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è?  
  ‚Üí –í –ø–∞—Ä—Å–µ—Ä–∞—Ö (–æ–±—Ö–æ–¥ AST), IDE (–∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞), —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π.  

---

**–ò—Ç–æ–≥:**  
üëâ *Visitor* ‚Äî –º–æ—â–Ω—ã–π —Å–ø–æ—Å–æ–± **–¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –Ω–∞–¥ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –æ–±—ä–µ–∫—Ç–æ–≤, **–Ω–µ —Ç—Ä–æ–≥–∞—è —Å–∞–º–∏ –∫–ª–∞—Å—Å—ã** —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
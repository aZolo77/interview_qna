# Чем отличается `Set` от `WeakSet`

Обе структуры данных позволяют хранить **уникальные значения**, но работают они по-разному.  

---

## 1. Хранимые значения
- **Set**: может хранить **любые значения** — примитивы и объекты.  
- **WeakSet**: может хранить **только объекты** (не примитивы).  

Пример:

```js
const set = new Set([1, 'str', true, {}, []]);

console.log(set.size); // 5

const weakSet = new WeakSet();
weakSet.add({}); // ок
// weakSet.add(123); // ❌ ошибка, примитив нельзя
```

---

## 2. Сильные и слабые ссылки
- **Set**: хранит сильные ссылки. Объекты остаются в памяти, пока они есть в `Set`.  
- **WeakSet**: хранит слабые ссылки. Если на объект нет других ссылок, сборщик мусора удаляет его автоматически из `WeakSet`.  

Пример:

```js
let user = { name: 'John' };

const set = new Set();
set.add(user);
user = null;

console.log(set.size); // 1 (объект всё ещё в памяти!)

let guest = { name: 'Alice' };
const weakSet = new WeakSet();
weakSet.add(guest);
guest = null;
// объект удаляется автоматически
```

---

## 3. Итерация и свойства
- **Set**: можно перебирать с помощью `for...of`, `forEach`, а также использовать методы `keys()`, `values()`, `entries()`. Есть свойство `.size`.  
- **WeakSet**: **не поддерживает итерацию** и не имеет `.size`.  

Пример:

```js
const set = new Set([1, 2, 3]);

for (let value of set) {
    console.log(value);
}

console.log(set.size); // 3

const weakSet = new WeakSet();
weakSet.add({});
// Перебрать weakSet нельзя
```

---

## 4. Методы
- **Set**: `add`, `delete`, `has`, + итерационные возможности.  
- **WeakSet**: только `add`, `delete`, `has`.  

---

## 5. Применение
- **Set**: подходит для хранения любых уникальных значений (примитивов или объектов), удобно использовать для фильтрации или проверки уникальности.  
- **WeakSet**: используется, если нужно хранить **уникальные объекты**, которые должны автоматически удаляться из коллекции, когда они больше не используются.  

---

## 6. Практические кейсы

### Уникальные объекты

```js
const visited = new WeakSet();

function visit(user) {
    if (visited.has(user)) {
        console.log('Уже заходил');
    } else {
        visited.add(user);
        console.log('Первый визит');
    }
}

let john = { name: 'John' };
visit(john); // Первый визит
visit(john); // Уже заходил

john = null; 
// объект удалён вместе с записью в WeakSet
```

---

## Итог
- Используйте **Set**, когда нужны уникальные значения любых типов и возможность работать с коллекцией напрямую (перебирать, проверять размер).  
- Используйте **WeakSet**, когда нужно отслеживать **уникальные объекты** и важно, чтобы данные автоматически очищались сборщиком мусора.  

# –¢—Ä—ë—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (TCP Three-Way Handshake)

## üéØ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**TCP Three-Way Handshake** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ —Ç—Ä—ë—Ö —ç—Ç–∞–ø–æ–≤ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

---

## TCP Handshake –∏ —Ñ–ª–∞–≥–∏ SYN/ACK

### ü§ù TCP Handshake –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

TCP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä—ë—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏ —É–±–µ–¥–∏–ª–∏—Å—å, —á—Ç–æ –æ–±–∞ –≥–æ—Ç–æ–≤—ã –∫ –æ–±–º–µ–Ω—É –¥–∞–Ω–Ω—ã–º–∏.

#### –®–∞–≥ 1 ‚Äî SYN

–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SYN-–ø–∞–∫–µ—Ç:

* ¬´–•–æ—á—É —Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è, –≤–æ—Ç –º–æ–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä –ø–∞–∫–µ—Ç–æ–≤¬ª (Initial Sequence Number, ISN)

#### –®–∞–≥ 2 ‚Äî SYN-ACK

–°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç SYN+ACK:

* –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ SYN –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
* –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–æ–º–µ—Ä –ø–∞–∫–µ—Ç–æ–≤

#### –®–∞–≥ 3 ‚Äî ACK

–ö–ª–∏–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä ACK:

* ¬´–û–∫, —Ç–≤–æ–π –Ω–æ–º–µ—Ä –ø–æ–ª—É—á–∏–ª, –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å¬ª
* –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å

### üîπ –§–ª–∞–≥–∏ TCP-–ø–∞–∫–µ—Ç–æ–≤

**SYN (Synchronize)**

* –°–∏–≥–Ω–∞–ª –Ω–∞ **—É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π

**ACK (Acknowledge)**

* –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–∞–∫–µ—Ç–∞
* –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –±–∞–π—Ç–∞ (Acknowledgment Number)

### ‚ö° –ö—Ä–∞—Ç–∫–æ –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è

> SYN ‚Äî —ç—Ç–æ —Å–∏–≥–Ω–∞–ª –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ω–æ–º–µ—Ä–æ–≤ –ø–∞–∫–µ—Ç–æ–≤, ACK ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –ø–∞–∫–µ—Ç –∏–ª–∏ –∑–∞–ø—Ä–æ—Å –¥–æ—à—ë–ª. –í —Ç—Ä—ë—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–∏ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –∏ –∑–Ω–∞–ª–∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

```
–ö–ª–∏–µ–Ω—Ç                           –°–µ—Ä–≤–µ—Ä
   |                               |
   |  SYN (seq=100)               |
   |------------------------------>|
   |                               |
   |  SYN-ACK (seq=200, ack=101)  |
   |<------------------------------|
   |                               |
   |  ACK (ack=201)               |
   |------------------------------>|
   |                               |
   |  üîó –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ    |
```

---

## üéØ –¶–µ–ª–∏ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **–û–±–º–µ–Ω –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** –∫ –æ–±–º–µ–Ω—É –¥–∞–Ω–Ω—ã–º–∏
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö** –ø–∞–∫–µ—Ç–æ–≤
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

## üõ°Ô∏è TLS Handshake vs TCP Handshake

### TCP Handshake
- **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** (Layer 4)
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**
- **3 —Å–æ–æ–±—â–µ–Ω–∏—è**
- –ù–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω

### TLS Handshake
- **–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å** (Layer 7)
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è**
- **4+ —Å–æ–æ–±—â–µ–Ω–∏–π** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏)
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–ø–æ—Å–ª–µ TCP handshake**

```
1. TCP Three-Way Handshake
2. TLS Handshake
3. –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
```

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** (Connection pooling)
- **–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** –¥–æ–º–µ–Ω–æ–≤
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ network timing** –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

- –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å TCP Three-Way Handshake
- –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å–ª—É—á–∞–π–Ω—ã–µ sequence numbers?
- –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ SYN –ø–∞–∫–µ—Ç–∞?
- –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É TCP –∏ TLS handshake?